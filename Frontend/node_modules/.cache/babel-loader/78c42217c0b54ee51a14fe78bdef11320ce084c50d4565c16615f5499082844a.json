{"ast":null,"code":"var _jsxFileName = \"/home/peacover/Desktop/1337_projects/ft_transcendence/front-end-PongGame/src/components/spectator_mod.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport Sketch from \"react-p5\";\nimport { useEffect, useRef, useState } from 'react';\nimport { io } from \"socket.io-client\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Spectator = () => {\n  _s();\n  const socket = useRef(null);\n  const my_live_games = useRef(null);\n  const [state, setState] = useState(\"waiting\");\n  const [Cpt, setCpt] = useState(0);\n  const gameState = useRef(null);\n  const [my_width, setWidth] = useState(window.innerWidth);\n  const [m_height, setHeight] = useState(window.innerHeight);\n  const getWindowSizee = () => {\n    const {\n      innerWidth,\n      innerHeight\n    } = window;\n    return {\n      innerWidth,\n      innerHeight\n    };\n  };\n  let ok = 0;\n  let hh = 0;\n  let yarb = 0;\n  const [layhfdk, setLayhfdk] = useState(0);\n  let button_cpt = 0;\n  let buttons = [];\n  let aspectRatio = 0;\n  let absoluteWidth = 0;\n  let relativeWidth = 0;\n  let absoluteHeight = 0;\n  let relativeHeight = 0;\n  let scalingRatio = 0;\n  function buttonPressed(nbr) {\n    button_cpt = 1;\n    //console.log(\"nbr \" + nbr);\n    if (socket.current != null) socket.current.emit(\"spectJoin\", {\n      value: nbr\n    });\n    setState(\"started watching\");\n    //hh = c;\n    //buttons.splice(0, c);\n    //\n  }\n\n  useEffect(() => {\n    socket.current = io(\"http://localhost:5555\").on(\"connect\", () => {\n      var _socket$current, _socket$current2;\n      (_socket$current = socket.current) === null || _socket$current === void 0 ? void 0 : _socket$current.on(\"gameCount\", data => {\n        my_live_games.current = data;\n        setLayhfdk(+data);\n        //console.log(\"nadi \" + layhfdk);\n      });\n\n      (_socket$current2 = socket.current) === null || _socket$current2 === void 0 ? void 0 : _socket$current2.on(\"queue_status\", data => {\n        if (state == \"waiting\") {}\n        gameState.current = data;\n      });\n      return () => {\n        var _socket$current3, _socket$current4;\n        (_socket$current3 = socket.current) === null || _socket$current3 === void 0 ? void 0 : _socket$current3.removeAllListeners();\n        (_socket$current4 = socket.current) === null || _socket$current4 === void 0 ? void 0 : _socket$current4.close();\n      };\n    });\n  }, [state, layhfdk]);\n  const setup = (p5, canvasParentRef) => {\n    p5.createCanvas(window.innerWidth / 2, window.innerWidth / 4).parent(canvasParentRef);\n    p5.background(122);\n  };\n  function draw(p5) {\n    var _socket$current5, _gameState$current;\n    (_socket$current5 = socket.current) === null || _socket$current5 === void 0 ? void 0 : _socket$current5.emit(\"spectJoined\");\n    //console.log(\"nadi \" + layhfdk); \n    p5.resizeCanvas(window.innerWidth / 2, window.innerWidth / 4);\n    p5.background(122);\n    function getWindowSize() {\n      const {\n        innerWidth,\n        innerHeight\n      } = window;\n      return {\n        innerWidth,\n        innerHeight\n      };\n    }\n    function get_window_height() {\n      return getWindowSize().innerHeight;\n    }\n    if (gameState.current != null) {\n      aspectRatio = gameState.current.aspectRatio;\n      absoluteWidth = gameState.current.width;\n      relativeWidth = getWindowSize().innerWidth / 2;\n      absoluteHeight = absoluteWidth / aspectRatio;\n      relativeHeight = relativeWidth / aspectRatio;\n      scalingRatio = relativeWidth / absoluteWidth;\n      // console.log(\"MY section width is  \" + relativeWidth + \" my section height is \" + relativeHeight);\n    }\n\n    // const [windowSize, setWindowSize] = useState(getWindowSize());\n\n    // const [sectionWidth, setSectionWidth] = useState(getWindowSize().innerWidth);\n    // const [sectionHeight, setSectionHeight] = useState(getWindowSize().innerHeight);\n    // p5.resizeCanvas(getWindowSize().innerWidth   , get_window_height()  );\n    // p5.background(122);\n    p5.resizeCanvas(window.innerWidth / 2, window.innerWidth / 4);\n    p5.background(122);\n    let awdi = 0;\n    //console.log(\"Here here\" + buttons.length);\n    if (state == \"spect\") {\n      //console.log(\"Hana awdtani \" + hh);\n      //console.log(\"wa zabi\");\n      if (socket.current != null) {\n        //console.log(\"wa zabi2\");\n        //console.log(\"Here broski\");\n\n        if (hh != 0) {\n\n          //console.log(\"jsp mali dakhl hna : \" + layhfdk);\n        }\n      }\n\n      //console.log(\"hadi hya ok \" + ok);\n      // socket.on('data', (data) => {\n      //   console.log(data);\n      // });\n    } else if (state == \"started watching\") {}\n\n    // Clear the canvas\n    let gameCountElement = document.getElementById('gameCount');\n    if (state == \"waiting\") {}\n    //console.log(\"Winner is \"+ gameState.current?.players.indexOf(gameState.current.winner));\n    let winner_id = (_gameState$current = gameState.current) === null || _gameState$current === void 0 ? void 0 : _gameState$current.players.indexOf(gameState.current.winner);\n\n    // setState(\"Play\");\n    if (gameState.current != null) {\n      // if (relativeHeight > 400) \n      // {\n      //   absoluteHeight = gameState.current.height;\n      //   relativeHeight = 400;\n      //   absoluteWidth = absoluteHeight * aspectRatio; //\n      //   relativeWidth = relativeHeight * aspectRatio; // if any of these overflowas section dimensions, we scale based on the one that over flows\n      //   scalingRatio = relativeHeight / absoluteHeight;\n      // }\n\n      const drawClickToStartText = p5 => {\n        if (gameState.current != null && socket.current != null) {\n          let width = getWindowSize().innerWidth;\n          let height = getWindowSize().innerHeight;\n          if (gameState.current.state === \"scored\") {\n            p5.fill(0);\n            p5.textSize(relativeWidth / 35);\n            p5.textAlign(p5.CENTER);\n            const scores = gameState.current.scores;\n            const scoresSum = scores[0] + scores[1];\n            if (gameState.current.players.indexOf(socket.current.id) == -1) {\n              // this is in case it's a spectator he can only watch without interfering in the game because his id couldn't be find \n              // in the players id array \n              p5.text(\"Waiting for players to start the game\", width / 4, width / 16);\n            } else {\n              // in here both the players recieve text in the middle\n              // the one who scored is displaying the waiting text while the other one the click enter\n              // when he does click enter the ball gets respawned in the middle with the scores updated and the ball moving again\n              // thus creating a new partido if you would call it that \n\n              p5.text(socket.current.id === gameState.current.lastscored ? \"Waiting for oponent to start the game\" : \"Click enter to start the game \", width / 4, width / 16);\n            }\n          }\n        }\n      };\n      const drawScore = p5 => {\n        // this method will allow us to draw the score line of both players\n        // we start of by filling the whole screen black \n        // we allign the text in the center and we can rectrieve the score of each players using the gamestate that is constantly\n        //retrieving data from the backend of our code and then we display it\n        // how to create as many buttons as i want based on a number \n\n        p5.fill(0);\n        p5.textSize(getWindowSize().innerHeight * 20 / getWindowSize().innerHeight);\n        p5.textAlign(p5.CENTER);\n        //p5.resizeCanvas(getWindowSize().innerWidth, getWindowSize().innerHeight);\n        //console.log(relativeHeight);\n        if (gameState.current != null) {\n          p5.text(gameState.current.scores[0], getWindowSize().innerWidth / 32 * 7, getWindowSize().innerWidth / 8);\n          p5.text(gameState.current.scores[1], getWindowSize().innerWidth / 32 * 9, getWindowSize().innerWidth / 8);\n          if (gameState.current.state == \"endGame\") {\n            p5.text(\"Player 1 Won the game\", getWindowSize().innerWidth / 4, getWindowSize().innerWidth / 16);\n          }\n        }\n      };\n      //p5.clear();\n\n      // if (gameState.current.state == \"endGame\")\n      //   console.log(\"hana habibi\");\n      //console.log(\"Asbhan lah \" + gameState.current.state);\n      // p5.resizeCanvas(getWindowSize().innerWidth   , relativeHeight);\n      // p5.background(122);\n      drawClickToStartText(p5);\n      drawScore(p5);\n      //console.log(\"Heres my aspect ratio \" + aspectRatio);\n      //the p5.rect method allows us to create a rectangle using the properties in the arguments x,y,width,heigh\n      p5.rect(gameState.current.fr_paddle_x * scalingRatio, gameState.current.fr_paddle_y * scalingRatio, gameState.current.paddle_width * scalingRatio, gameState.current.paddle_height * scalingRatio);\n      p5.rect(gameState.current.sec_paddle_x * scalingRatio, gameState.current.sec_paddle_y * scalingRatio, gameState.current.paddle_width * scalingRatio, gameState.current.paddle_height * scalingRatio);\n      //the p5.circle method allows us to create a circle using the properties in the arguments x,y,Raduis\n      p5.circle(gameState.current.ball_x * scalingRatio, gameState.current.ball_y * scalingRatio, gameState.current.ball_radius * scalingRatio);\n    }\n  }\n\n  //};\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: Array.from({\n        length: layhfdk\n      }, (v, i) => i + 1).map(i => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => buttonPressed(i),\n        children: [\"YAWDI HAAAANAAAAA \", i]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(Sketch, {\n      setup: setup,\n      draw: draw\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 282,\n    columnNumber: 10\n  }, this);\n};\n_s(Spectator, \"AxMYFs0ODO8Fl7btCHwfS0RwIK0=\");\n_c = Spectator;\nexport default Spectator;\nvar _c;\n$RefreshReg$(_c, \"Spectator\");","map":{"version":3,"names":["React","Sketch","useEffect","useRef","useState","io","Spectator","socket","my_live_games","state","setState","Cpt","setCpt","gameState","my_width","setWidth","window","innerWidth","m_height","setHeight","innerHeight","getWindowSizee","ok","hh","yarb","layhfdk","setLayhfdk","button_cpt","buttons","aspectRatio","absoluteWidth","relativeWidth","absoluteHeight","relativeHeight","scalingRatio","buttonPressed","nbr","current","emit","value","on","data","removeAllListeners","close","setup","p5","canvasParentRef","createCanvas","parent","background","draw","resizeCanvas","getWindowSize","get_window_height","width","awdi","gameCountElement","document","getElementById","winner_id","players","indexOf","winner","drawClickToStartText","height","fill","textSize","textAlign","CENTER","scores","scoresSum","id","text","lastscored","drawScore","rect","fr_paddle_x","fr_paddle_y","paddle_width","paddle_height","sec_paddle_x","sec_paddle_y","circle","ball_x","ball_y","ball_radius","Array","from","length","v","i","map"],"sources":["/home/peacover/Desktop/1337_projects/ft_transcendence/front-end-PongGame/src/components/spectator_mod.tsx"],"sourcesContent":["import React from \"react\";\nimport Sketch from \"react-p5\";\nimport p5Types from \"p5\";\n\nimport P5Wrapper from 'react-p5';\nimport p5 from 'p5';\nimport { Paddle } from \"./Lobby\"\nimport { GameState } from \"./Ball\"\nimport { ReactP5Wrapper } from \"react-p5-wrapper\";\nimport { useEffect, useRef, useState } from 'react';\nimport { io, Socket } from \"socket.io-client\";\nimport { useSearchParams } from \"react-router-dom\";\nimport { stat } from \"fs\";\n\ninterface live_games {\n    count: number;\n}\n\nconst Spectator = () => {\n\n  const socket = useRef(null as null | Socket);\n  const my_live_games = useRef(null as null | live_games);\n  const [state, setState] = useState(\"waiting\");\n  const [Cpt, setCpt] = useState(0);\n\n   const gameState = useRef(null as null | GameState);\n\n\n  const [my_width, setWidth] = useState(window.innerWidth);\n  const [m_height, setHeight] = useState(window.innerHeight);\n\n  const getWindowSizee = () => {\n    const { innerWidth, innerHeight } = window;\n    return { innerWidth, innerHeight };\n  }\n\n\n\n\n  let ok = 0;\n  let hh = 0;\n  let yarb = 0;\n  const [layhfdk, setLayhfdk] = useState(0);\n  let button_cpt = 0;\n  let buttons: p5.Element[] = [];\n\n  let aspectRatio: number = 0;\n\n  let absoluteWidth: number = 0;\n  let relativeWidth: number = 0;\n\n  let absoluteHeight: number = 0;\n  let relativeHeight: number = 0;\n\n  let scalingRatio: number = 0;\n\n  function buttonPressed(nbr: number) {\n    button_cpt = 1;\n    //console.log(\"nbr \" + nbr);\n    if (socket.current != null)\n      socket.current.emit(\"spectJoin\", { value: nbr });\n    setState(\"started watching\");\n    //hh = c;\n    //buttons.splice(0, c);\n    //\n  }\n\n  useEffect(() => {\n    socket.current = io(\"http://localhost:5555\").on(\"connect\", () => {\n\n      socket.current?.on(\"gameCount\", (data) => {\n\n        my_live_games.current = data;\n        setLayhfdk(+data);\n        //console.log(\"nadi \" + layhfdk);\n      });\n\n\n      socket.current?.on(\"queue_status\", (data: GameState) => {\n\n        if (state == \"waiting\") {\n\n        }\n        gameState.current = data;\n      });\n\n      return () => {\n        socket.current?.removeAllListeners();\n        socket.current?.close();\n      }\n    });\n  }, [state, layhfdk]);\n\n  const setup = (p5: p5Types, canvasParentRef: Element) => \n  {\n    p5.createCanvas(window.innerWidth / 2, (window.innerWidth / 4)).parent(canvasParentRef)  \n    p5.background(122);\n  }\n\n  function draw(p5: p5Types)\n    {\n        socket.current?.emit(\"spectJoined\");\n        //console.log(\"nadi \" + layhfdk); \n        p5.resizeCanvas(window.innerWidth /2 , window.innerWidth/4);\n        p5.background(122);\n\n        function getWindowSize() {\n            const { innerWidth, innerHeight } = window;\n            return { innerWidth, innerHeight };\n          }\n      \n          function get_window_height() {\n            return getWindowSize().innerHeight;\n          }\n          if (gameState.current != null) {\n            aspectRatio = gameState.current.aspectRatio;\n      \n            absoluteWidth = gameState.current.width;\n            relativeWidth = getWindowSize().innerWidth / 2;\n      \n      \n            absoluteHeight = absoluteWidth / aspectRatio;\n            relativeHeight = (relativeWidth / aspectRatio);\n      \n            scalingRatio = relativeWidth / absoluteWidth;\n           // console.log(\"MY section width is  \" + relativeWidth + \" my section height is \" + relativeHeight);\n          }\n      \n          // const [windowSize, setWindowSize] = useState(getWindowSize());\n      \n          // const [sectionWidth, setSectionWidth] = useState(getWindowSize().innerWidth);\n          // const [sectionHeight, setSectionHeight] = useState(getWindowSize().innerHeight);\n          // p5.resizeCanvas(getWindowSize().innerWidth   , get_window_height()  );\n          // p5.background(122);\n          p5.resizeCanvas(window.innerWidth /2 , window.innerWidth/4);\n          p5.background(122);\n      \n          let awdi = 0;\n          //console.log(\"Here here\" + buttons.length);\n          if (state == \"spect\") {\n            //console.log(\"Hana awdtani \" + hh);\n            //console.log(\"wa zabi\");\n            if (socket.current != null) {\n              //console.log(\"wa zabi2\");\n              //console.log(\"Here broski\");\n      \n              if (hh != 0) {\n      \n                //console.log(\"jsp mali dakhl hna : \" + layhfdk);\n              }\n      \n      \n            }\n      \n            //console.log(\"hadi hya ok \" + ok);\n            // socket.on('data', (data) => {\n            //   console.log(data);\n            // });\n      \n      \n          }\n          else if (state == \"started watching\") {\n      \n          }\n      \n          // Clear the canvas\n          let gameCountElement = document.getElementById('gameCount');\n      \n          if (state == \"waiting\") {\n      \n          }\n          //console.log(\"Winner is \"+ gameState.current?.players.indexOf(gameState.current.winner));\n          let winner_id = gameState.current?.players.indexOf(gameState.current.winner);\n      \n          // setState(\"Play\");\n          if (gameState.current != null) {\n      \n      \n      \n            // if (relativeHeight > 400) \n            // {\n            //   absoluteHeight = gameState.current.height;\n            //   relativeHeight = 400;\n            //   absoluteWidth = absoluteHeight * aspectRatio; //\n            //   relativeWidth = relativeHeight * aspectRatio; // if any of these overflowas section dimensions, we scale based on the one that over flows\n            //   scalingRatio = relativeHeight / absoluteHeight;\n            // }\n      \n            const drawClickToStartText = (p5: p5Types) => {\n              if (gameState.current != null && socket.current != null) {\n      \n      \n                let width = getWindowSize().innerWidth;\n                let height = getWindowSize().innerHeight;\n                if (gameState.current.state === \"scored\") {\n                  p5.fill(0);\n                  p5.textSize(((relativeWidth) / 35));\n                  p5.textAlign(p5.CENTER);\n                  const scores = gameState.current.scores;\n                  const scoresSum = scores[0] + scores[1];\n                  if (gameState.current.players.indexOf(socket.current.id) == -1) {\n                    // this is in case it's a spectator he can only watch without interfering in the game because his id couldn't be find \n                    // in the players id array \n                    p5.text(\"Waiting for players to start the game\",\n                      (width) / 4,\n                      width / 16\n                    );\n                  }\n                  else {\n                    // in here both the players recieve text in the middle\n                    // the one who scored is displaying the waiting text while the other one the click enter\n                    // when he does click enter the ball gets respawned in the middle with the scores updated and the ball moving again\n                    // thus creating a new partido if you would call it that \n      \n                    p5.text(\n                      socket.current.id === gameState.current.lastscored\n                        ? \"Waiting for oponent to start the game\"\n                        : \"Click enter to start the game \",\n                      (width) / 4,\n                      width / 16\n                    );\n                  }\n                }\n              }\n      \n            };\n      \n            const drawScore = (p5: p5Types) => {\n              // this method will allow us to draw the score line of both players\n              // we start of by filling the whole screen black \n              // we allign the text in the center and we can rectrieve the score of each players using the gamestate that is constantly\n              //retrieving data from the backend of our code and then we display it\n              // how to create as many buttons as i want based on a number \n      \n              p5.fill(0);\n              p5.textSize((getWindowSize().innerHeight * 20) / getWindowSize().innerHeight);\n              p5.textAlign(p5.CENTER);\n              //p5.resizeCanvas(getWindowSize().innerWidth, getWindowSize().innerHeight);\n              //console.log(relativeHeight);\n              if (gameState.current != null) {\n                p5.text(\n                  gameState.current.scores[0],\n                  (getWindowSize().innerWidth / 32) * 7,\n                  getWindowSize().innerWidth / 8\n                );\n                p5.text(\n                  gameState.current.scores[1],\n                  (getWindowSize().innerWidth / 32) * 9,\n                  getWindowSize().innerWidth / 8\n                );\n                if (gameState.current.state == \"endGame\") {\n                  p5.text(\"Player 1 Won the game\",\n                    (getWindowSize().innerWidth) / 4,\n                    getWindowSize().innerWidth / 16\n                  );\n                }\n      \n              }\n      \n            };\n            //p5.clear();\n      \n      \n            // if (gameState.current.state == \"endGame\")\n            //   console.log(\"hana habibi\");\n            //console.log(\"Asbhan lah \" + gameState.current.state);\n            // p5.resizeCanvas(getWindowSize().innerWidth   , relativeHeight);\n            // p5.background(122);\n            drawClickToStartText(p5);\n            drawScore(p5);\n            //console.log(\"Heres my aspect ratio \" + aspectRatio);\n            //the p5.rect method allows us to create a rectangle using the properties in the arguments x,y,width,heigh\n            p5.rect(gameState.current.fr_paddle_x * scalingRatio, gameState.current.fr_paddle_y * scalingRatio, gameState.current.paddle_width * scalingRatio, gameState.current.paddle_height * scalingRatio);\n      \n            p5.rect(gameState.current.sec_paddle_x * scalingRatio, gameState.current.sec_paddle_y * scalingRatio, gameState.current.paddle_width * scalingRatio, gameState.current.paddle_height * scalingRatio);\n            //the p5.circle method allows us to create a circle using the properties in the arguments x,y,Raduis\n            p5.circle(gameState.current.ball_x * scalingRatio, gameState.current.ball_y * scalingRatio, gameState.current.ball_radius * scalingRatio);\n            }\n    }\n  \n  //};\n  return <div className=\"canvas-container\">\n    <div>\n        {Array.from({ length: layhfdk }, (v, i) => i + 1).map(i => (\n            <button key={i} onClick={() => buttonPressed(i)}>YAWDI HAAAANAAAAA {i}</button>\n        ))}\n    </div>\n    <Sketch setup={setup} draw={draw} />\n  </div>;\n};\n\n\nexport default Spectator;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}